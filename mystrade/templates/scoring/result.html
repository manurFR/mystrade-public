{% extends "base.html" %}
{% load staticfiles %}
{% load url from future %}

{% block styles %}
<link rel="stylesheet" href="{% static 'style.collapse.css' %}" />
{% endblock %}

{% block scripts %}
<script src="{% static 'jquery/jquery-1.8.2.min.js' %}"></script>
<script src="{% static 'jquery/jquery.collapse.js' %}"></script>
{% endblock %}

{% block content %}
	<div class="header">Result :</div>
	{% for player in players %}
		#{{ forloop.counter }} &mdash;
		Player : {{ player.index }} &mdash;
		Score : {{ player.score }}<br/><br/>
		Detail :
		<div class="css_table">
			<div class="css_table-row">
				<div class="css_table-cell colored">
					Hand :
					{% for commodity, nb_cards in player.hand.items %}{{ commodity.name }} : {{ nb_cards }}{% if not forloop.last %}, {% endif %}{% endfor %}
				</div>
			</div>
			{% for commodity in player.scoresheet.commodities %}
			<div class="css_table-row">
				<div class="css_table-cell colored">{{ commodity.name }} ({{ commodity.scored_cards }} cards x {{ commodity.actual_value }})</div>
				<div class="css_table-cell colored score">{{ commodity.score|default_if_none:'' }}</div>
			</div>
			{% endfor %}
			{% for line in player.scoresheet.extra %}
			<div class="css_table-row">
				<div class="css_table-cell colored">{{ line.detail }}</div>
				<div class="css_table-cell colored score">{{ line.score|default_if_none:'' }}</div>
			</div>
			{% endfor %}
			<div class="css_table-row">
				<div class="css_table-cell colored"><strong>Total</strong></div>
				<div class="css_table-cell colored score"><strong>{{ player.score }}</strong></div>
			</div>
		</div>
		<br/>
	{% endfor %}

	<div class="collapse" data-collapse>
		<h4>Rules</h4>
		<div class="css_table">
		{% for card in rules %}
			{% if forloop.first or forloop.counter0|divisibleby:"4" %}
			<div class="css_table-row">
			{% endif %}
			  <div class="css_table-cell">
			    <div class="rulecard">
				  <div class="rulecard_name">{{ card.public_name }}</div>
				  <div class="rulecard_desc">{{ card.description }}</div>
			    </div>
			  </div>
			{% if forloop.counter|divisibleby:"4" or forloop.last %}
			</div>
			{% endif %}
		{% endfor %}
		</div>
	</div>
{% endblock content %}