{% extends "base.html" %}
{% load staticfiles %}
{% load url from future %}

{% block styles %}
<link rel="stylesheet" href="{% static 'style.collapse.css' %}" />
{% endblock %}

{% block scripts %}
<script src="{% static 'jquery/jquery-1.8.2.min.js' %}"></script>
<script src="{% static 'jquery/jquery.collapse.js' %}"></script>
{% endblock %}

{% block content %}
	<div class="header">Result :</div>
	{% for player in players %}
		#{{ forloop.counter }} &mdash;
		Player : {{ player.index }} [{% for commodity, nb_cards in player.hand.items %}{{ commodity.name }} : {{ nb_cards }}{% if not forloop.last %} | {% endif %}{% endfor %}]<br/>
		Score : {{ player.score }}<br/><br/>
		Detail :
		<table summary="Scoresheet">
			<tr>
				<th>Rule</th>
				<th>Detail</th>
				<th>Score</th>
			</tr>
			{% for commodity in player.scoresheet.commodities %}
				<tr>
					<td>{{ commodity.name }}</td>
					<td>{{ commodity.scored_cards }} cards x {{ commodity.actual_value }}</td>
					<td></td>
				</tr>
			{% endfor %}
			{% for line in player.scoresheet.extra %}
			<tr>
				<td>{{ line.detail }}</td>
				<td></td>
				<td>{{ line.score|default_if_none:'' }}</td>
			</tr>
			{% endfor %}
		</table>
		<br/>
	{% endfor %}

	<div class="collapse" data-collapse>
		<h4>Rules</h4>
		<div class="css_table">
		{% for card in rules %}
			{% if forloop.first or forloop.counter0|divisibleby:"4" %}
			<div class="css_table-row">
			{% endif %}
			  <div class="css_table-cell">
			    <div class="rulecard">
				  <div class="rulecard_name">{{ card.public_name }}</div>
				  <div class="rulecard_desc">{{ card.description }}</div>
			    </div>
			  </div>
			{% if forloop.counter|divisibleby:"4" or forloop.last %}
			</div>
			{% endif %}
		{% endfor %}
		</div>
	</div>
{% endblock content %}